Ссылка на проект - https://github.com/Dbl4/Auth_sprint_1

[Техническое задание](documentation/requirements.md)

# Описание системы
[Блок-схема системы](documentation/block-scheme.md)

[Сервис Auth API](documentation/auth-api/README.md)

[ER-диаграмма PostgreSQL сервиса Admin](documentation/admin-er-diagram.md)

# Сборка и запуск системы
Для сборки и запуска приложения в терминале перейдите в папку проекта и используйте следующие команды.

## Первый запуск системы
Сформировать файл `.env`.
(Опционально) Запустить виртуальное окружение.
Установить зависимости `pip install -r requirements.txt`.
Cкомпилировать контейнеры `make build`.
Запустить приложения в режиме разработки `make dev`.
Загрузить начальные данные в Postgres `make loaddata`.
После загрузки данных необходимо заново запустить ETL (или перезапустить всю систему).

Создать аккаунт администратора пользователей в сервисе Auth API `make authadmin`.

## Остановка системы 
Остановка контейнеров `make down`.

## Запуск системы в режиме разработки
Запуск системы `make dev`.
В этом режиме открыты порты всех основных контейнеров.
Для дебага приложения fastapi или etl можно остановить соответстующий контейнер и запускать приложение скриптом `main.sh`, расположенным в папке приложения.
Для запуска тестов на локальном компьютере использовать `pytest`.

## Запуск системы в производственном режиме без тестов
Запуск системы `make up`.
В этом режиме открыт только порт nginx:80.

## Запуск системы в производственном режиме с тестами
Запуск системы `make test`.
В этом режиме открыт только порт nginx:80.
Контейнер nginx запускается только если успешно проходят тесты в контейнере tests.

## Ручной запуск тестов сервиса auth
Скопировать файл `.env` из корня проекта в папку `auth`.
Запустить приложения командой `make dev`.
Остановить контейнер `auth`.
В терминале перейти в директорию `auth`.
Выполнить команду `python .`.
